{"ast":null,"code":"var _jsxFileName = \"/home/son/Documents/reactjs-api/src/components/Admin/Products/Edit_product.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport Admin_layout from '../../../pages/admin_layout';\nimport { useForm } from 'react-hook-form';\nimport axios from 'axios';\nimport { storage } from '../../../firebase';\n\nconst Edit_product = ({\n  data,\n  categories\n}) => {\n  const arrImg = [];\n  const {\n    id\n  } = useParams();\n  const product = data.find(element => element.id == id);\n  const [imgUrl, setImgUrl] = useState(product.gallery);\n  const {\n    register,\n    handleSubmit,\n    watch,\n    errors\n  } = useForm();\n\n  const onSubmit = async newData => {\n    const response = await axios.put('http://localhost:3001/products/' + id, {\n      id: id,\n      name: newData.name,\n      cateId: newData.cateId,\n      gallery: arrImg,\n      price: newData.price,\n      desc: newData.desc\n    });\n    window.location = \"/admin/products\";\n  };\n\n  const onUploadImg = event => {\n    const imgs = event.target.files;\n\n    for (let img of imgs) {\n      const upload = storage.ref(`images/${img.name}`).put(img);\n      upload.on('state_changed', () => {}, error => {\n        console.log(error);\n      }, () => {\n        storage.ref('images').child(img.name).getDownloadURL().then(url => {\n          arrImg.push(url);\n          console.log(url);\n          console.log(arrImg);\n          setImgUrl(arrImg); // console.log(imgUrl);\n        });\n      });\n    }\n  };\n\n  useEffect(() => {\n    const a = document.getElementsByTagName('option');\n\n    for (var i = 0; i < a.length; i++) {\n      if (a[i].value == product.cateId) {\n        a[i].selected = 'selected';\n      }\n    }\n  }, []);\n  const section = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"form\", {\n    id: \"addForm\",\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group m-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 18\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    name: \"name\",\n    defaultValue: product.name,\n    ref: register({\n      required: true,\n      minLength: 5\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 18\n    }\n  }), errors.name && errors.name.type === \"required\" && /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 69\n    }\n  }, \"Ban chua nhap gia tri\"), errors.name && errors.name.type === \"minLength\" && /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 70\n    }\n  }, \"It nhat co 5 ky tu\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group m-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 18\n    }\n  }, \"Image\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    className: \"form-control-file\",\n    name: \"image\",\n    multiple: true,\n    ref: register(),\n    onChange: onUploadImg,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 18\n    }\n  }), errors.image && errors.image.type === \"required\" && /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 71\n    }\n  }, \"Ban chua nhap gia tri\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group m-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, \"Categories\"), /*#__PURE__*/React.createElement(\"select\", {\n    name: \"cateId\",\n    className: \"form-control\",\n    ref: register(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }, categories.map((cate, index) => /*#__PURE__*/React.createElement(\"option\", {\n    key: index,\n    value: cate.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 19\n    }\n  }, cate.name))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group m-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 18\n    }\n  }, \"Price\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    className: \"form-control\",\n    name: \"price\",\n    defaultValue: product.price,\n    ref: register({\n      required: true,\n      min: 1\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 18\n    }\n  }), errors.price && errors.price.type === \"required\" && /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 71\n    }\n  }, \"Chua nhap gia\"), errors.price && errors.price.type === \"min\" && /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 66\n    }\n  }, \"Gia nho nhat bang 1\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group m-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 18\n    }\n  }, \"Desc\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    name: \"desc\",\n    defaultValue: product.desc,\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 18\n    }\n  }))), imgUrl.map((img, index) => {\n    return /*#__PURE__*/React.createElement(\"img\", {\n      key: index,\n      src: img,\n      id: \"img\",\n      width: \"60%\",\n      className: \"p-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 14\n      }\n    });\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group col-12 ml-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary mx-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 16\n    }\n  }, \"Submit\"), /*#__PURE__*/React.createElement(Link, {\n    to: \"/admin/products\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, \"Cancel\")))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 14\n    }\n  })));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Admin_layout, {\n    section: section,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 4\n    }\n  }));\n};\n\nexport default Edit_product;","map":{"version":3,"sources":["/home/son/Documents/reactjs-api/src/components/Admin/Products/Edit_product.js"],"names":["React","useState","useEffect","Link","useParams","Admin_layout","useForm","axios","storage","Edit_product","data","categories","arrImg","id","product","find","element","imgUrl","setImgUrl","gallery","register","handleSubmit","watch","errors","onSubmit","newData","response","put","name","cateId","price","desc","window","location","onUploadImg","event","imgs","target","files","img","upload","ref","on","error","console","log","child","getDownloadURL","then","url","push","a","document","getElementsByTagName","i","length","value","selected","section","required","minLength","type","image","map","cate","index","min"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport Admin_layout from '../../../pages/admin_layout';\nimport { useForm } from 'react-hook-form';\nimport axios from 'axios';\nimport { storage } from '../../../firebase';\n\nconst Edit_product = ({ data, categories }) => {\n\tconst arrImg = [];\n\tconst { id } = useParams();\n\tconst product = data.find(element => element.id == id);\n\tconst [ imgUrl, setImgUrl ] = useState(product.gallery);\n\tconst { register, handleSubmit, watch, errors } = useForm();\n\tconst onSubmit = async(newData) => {\n\t\tconst response = await axios.put('http://localhost:3001/products/'+id, {\n\t\t\tid: id,\n\t\t\tname: newData.name,\n\t\t\tcateId: newData.cateId,\n\t\t\tgallery: arrImg,\n\t\t\tprice: newData.price,\n\t\t\tdesc: newData.desc\n\t\t});\n\t\twindow.location = \"/admin/products\";\n\t}\n\n\tconst onUploadImg = (event) => {\n\t\tconst imgs = event.target.files;\n\t\tfor(let img of imgs){\n\t\t\tconst upload = storage.ref(`images/${img.name}`).put(img);\n\t\t\tupload.on('state_changed', () => {\n\n\t\t\t}, (error) => {\n\t\t\t\tconsole.log(error);\n\t\t\t}, () => {\n\t\t\t\tstorage.ref('images').child(img.name).getDownloadURL().then(url => {\n\t\t\t\t\tarrImg.push(url);\n\t\t\t\t\tconsole.log(url);\n\t\t\t\t\tconsole.log(arrImg);\n\t\t\t\t\tsetImgUrl(arrImg);\n\t\t\t\t\t// console.log(imgUrl);\n\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\n\t}\n\tuseEffect(() => {\n\t\tconst a = document.getElementsByTagName('option');\n\t\tfor (var i = 0; i < a.length; i++) {\n\t\t\tif (a[i].value == product.cateId) {\n\t\t\t\ta[i].selected = 'selected';\n\t\t\t}\n\t\t}\n\t}, [])\n\n\tconst section = <>\n\t\t\t\t\t\t<form id=\"addForm\" onSubmit={handleSubmit(onSubmit)}>\n\t\t\t\t\t        <div className=\"row\">\n\t\t\t\t\t        \t<div className=\"col-6\">\n\t\t\t\t\t        \t\t<div className=\"form-group m-2\">\n\t\t\t\t\t\t\t          <label>Name</label>\n\t\t\t\t\t\t\t          <input type=\"text\" className=\"form-control\" name=\"name\" defaultValue={product.name} ref={register({ required: true, minLength: 5})} />\n\t\t\t\t\t\t\t          {errors.name && errors.name.type === \"required\" && <label className=\"text-danger\">Ban chua nhap gia tri</label>}\n\t\t\t\t\t\t\t          {errors.name && errors.name.type === \"minLength\" && <label className=\"text-danger\">It nhat co 5 ky tu</label>}\n\t\t\t\t\t\t\t        </div>\n\t\t\t\t\t\t\t        <div className=\"form-group m-2\">\n\t\t\t\t\t\t\t          <label>Image</label>\n\t\t\t\t\t\t\t          <input type=\"file\" className=\"form-control-file\" name=\"image\" multiple ref={register()} onChange={onUploadImg} />\n\t\t\t\t\t\t\t          {errors.image && errors.image.type === \"required\" && <label className=\"text-danger\">Ban chua nhap gia tri</label>}\n\t\t\t\t\t\t\t        </div>\n\t\t\t\t\t\t\t        <div className=\"form-group m-2\">\n\t\t\t\t\t\t\t        \t<label>Categories</label>\n\t\t\t\t\t\t\t        \t<select name=\"cateId\" className=\"form-control\" ref={register()}>\n\t\t\t\t\t\t\t        \t\t{categories.map((cate, index) => \n\t\t\t\t\t\t\t        \t\t\t<option key={index} value={cate.id}>{cate.name}</option>\n\t\t\t\t\t\t\t        \t\t)}\n\t\t\t\t\t\t\t        \t</select>\n\t\t\t\t\t\t\t        </div>\n\t\t\t\t\t        \t</div>\n\t\t\t\t\t\t        <div className=\"col-6\">\n\t\t\t\t\t\t        \t<div className=\"form-group m-2\">\n\t\t\t\t\t\t\t          <label>Price</label>\n\t\t\t\t\t\t\t          <input type=\"number\" className=\"form-control\" name=\"price\" defaultValue={product.price} ref={register({ required: true, min: 1})} />\n\t\t\t\t\t\t\t          {errors.price && errors.price.type === \"required\" && <label className=\"text-danger\">Chua nhap gia</label>}\n\t\t\t\t\t\t\t          {errors.price && errors.price.type === \"min\" && <label className=\"text-danger\">Gia nho nhat bang 1</label>}\n\t\t\t\t\t\t\t        </div>\n\t\t\t\t\t\t\t        <div className=\"form-group m-2\">\n\t\t\t\t\t\t\t          <label>Desc</label>\n\t\t\t\t\t\t\t          <input type=\"text\" className=\"form-control\" name=\"desc\" defaultValue={product.desc} ref={register} />\n\t\t\t\t\t\t\t        </div>\n\t\t\t\t\t\t        </div>\n\t\t\t\t\t\t\t    {imgUrl.map((img, index) => {\n\t\t\t\t\t\t\t    \treturn(\n\t\t\t\t\t\t\t    \t\t<img key={index} src={img} id=\"img\" width=\"60%\" className=\"p-1\"/>\n\t\t\t\t\t\t\t    \t)\n\t\t\t\t\t\t\t    })}\n\t\t\t\t\t\t        <div className=\"form-group col-12 ml-2\">\n\t\t\t\t\t\t        \t<button type=\"submit\" className=\"btn btn-primary mx-1\">Submit</button>\n\t\t\t\t\t\t\t\t\t<Link to=\"/admin/products\">\n\t\t\t\t\t\t        \t\t<button type=\"button\" className=\"btn btn-danger\">Cancel</button>\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t        </div>\n\t\t\t\t\t        </div>\n\t\t\t\t\t        <div>\n\n\t\t\t\t\t        </div>\n\t\t\t\t\t    </form>\n\t\t\t\t\t</>\n\treturn (\n\t\t<div>\n\t\t\t<Admin_layout section={section} />\n\t\t</div>\n\t)\n}\n\nexport default Edit_product"]},"metadata":{},"sourceType":"module"}