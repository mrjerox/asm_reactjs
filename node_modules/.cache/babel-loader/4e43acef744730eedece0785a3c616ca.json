{"ast":null,"code":"var _jsxFileName = \"/home/son/Documents/reactjs-api/src/components/Admin/Categories/Edit_category.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport Admin_layout from '../../../pages/admin_layout';\nimport { useForm } from 'react-hook-form';\nimport axios from 'axios';\nimport { storage } from '../../../firebase';\n\nconst Add_category = ({\n  categories\n}) => {\n  const {\n    id\n  } = useParams();\n  const singleCate = categories.find(element => element.id == id);\n  console.log(categories);\n  const [imgUrl, setImgUrl] = useState();\n  const {\n    register,\n    handleSubmit,\n    watch,\n    errors\n  } = useForm();\n\n  const onSubmit = async newData => {\n    const response = await axios.put('http://localhost:3001/categories/' + id, {\n      id: id,\n      name: newData.name,\n      image: imgUrl\n    });\n    window.location = \"/admin/categories\";\n  };\n\n  const onUploadImg = event => {\n    const img = event.target.files[0];\n    const upload = storage.ref(`images/${img.name}`).put(img);\n    upload.on('state_changed', () => {}, error => {\n      console.log(error);\n    }, () => {\n      storage.ref('images').child(img.name).getDownloadURL().then(url => {\n        document.querySelector('#img').src = url;\n        setImgUrl(url);\n      });\n    });\n  };\n\n  const section = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"form\", {\n    id: \"addForm\",\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group m-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 18\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    className: \"form-control\",\n    name: \"name\",\n    defaultValue: singleCate.name,\n    ref: register({\n      required: true,\n      minLength: 5\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 18\n    }\n  }), errors.name && errors.name.type === \"required\" && /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 69\n    }\n  }, \"Ban chua nhap gia tri\"), errors.name && errors.name.type === \"minLength\" && /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 70\n    }\n  }, \"It nhat co 5 ky tu\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group m-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 18\n    }\n  }, \"Image\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    className: \"form-control\",\n    name: \"image\",\n    ref: register({\n      required: true\n    }),\n    onChange: onUploadImg,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 18\n    }\n  }), errors.image && errors.image.type === \"required\" && /*#__PURE__*/React.createElement(\"label\", {\n    className: \"text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 71\n    }\n  }, \"Ban chua nhap gia tri\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    id: \"img\",\n    src: singleCate.image,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 16\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group col-12 ml-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary mx-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 16\n    }\n  }, \"Submit\"), /*#__PURE__*/React.createElement(Link, {\n    to: \"/admin/categories\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, \"Cancel\")))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 14\n    }\n  })));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Admin_layout, {\n    section: section,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 4\n    }\n  }));\n};\n\nexport default Add_category;","map":{"version":3,"sources":["/home/son/Documents/reactjs-api/src/components/Admin/Categories/Edit_category.js"],"names":["React","useState","useEffect","Link","useParams","Admin_layout","useForm","axios","storage","Add_category","categories","id","singleCate","find","element","console","log","imgUrl","setImgUrl","register","handleSubmit","watch","errors","onSubmit","newData","response","put","name","image","window","location","onUploadImg","event","img","target","files","upload","ref","on","error","child","getDownloadURL","then","url","document","querySelector","src","section","required","minLength","type"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport { Link, useParams } from 'react-router-dom';\nimport Admin_layout from '../../../pages/admin_layout';\nimport { useForm } from 'react-hook-form';\nimport axios from 'axios';\nimport { storage } from '../../../firebase'\n\nconst Add_category = ({ categories }) => {\n\tconst { id } = useParams();\n\tconst singleCate = categories.find(element => element.id == id);\n\tconsole.log(categories);\n\tconst [ imgUrl, setImgUrl] = useState();\n\tconst { register, handleSubmit, watch, errors } = useForm();\n\tconst onSubmit = async(newData) => {\n\t\tconst response = await axios.put('http://localhost:3001/categories/'+id, {\n\t\t\tid: id,\n\t\t\tname: newData.name,\n\t\t\timage: imgUrl\n\t\t});\n\t\twindow.location = \"/admin/categories\";\n\t}\n\n\tconst onUploadImg = (event) => {\n\t\tconst img = event.target.files[0];\n\t\tconst upload = storage.ref(`images/${img.name}`).put(img);\n\t\tupload.on('state_changed', () => {\n\n\t\t}, (error) => {\n\t\t\tconsole.log(error);\n\t\t}, () => {\n\t\t\tstorage.ref('images').child(img.name).getDownloadURL().then(url => {\n\t\t\t\tdocument.querySelector('#img').src = url;\n\t\t\t\tsetImgUrl(url);\n\t\t\t})\n\t\t});\n\n\t}\n\n\tconst section = <>\n\t\t\t\t\t\t<form id=\"addForm\" onSubmit={handleSubmit(onSubmit)}>\n\t\t\t\t\t        <div className=\"row\">\n\t\t\t\t\t        \t<div className=\"col-6\">\n\t\t\t\t\t        \t\t<div className=\"form-group m-2\">\n\t\t\t\t\t\t\t          <label>Name</label>\n\t\t\t\t\t\t\t          <input type=\"text\" className=\"form-control\" name=\"name\" defaultValue={singleCate.name} ref={register({ required: true, minLength: 5})} />\n\t\t\t\t\t\t\t          {errors.name && errors.name.type === \"required\" && <label className=\"text-danger\">Ban chua nhap gia tri</label>}\n\t\t\t\t\t\t\t          {errors.name && errors.name.type === \"minLength\" && <label className=\"text-danger\">It nhat co 5 ky tu</label>}\n\t\t\t\t\t\t\t        </div>\n\t\t\t\t\t\t\t        <div className=\"form-group m-2\">\n\t\t\t\t\t\t\t          <label>Image</label>\n\t\t\t\t\t\t\t          <input type=\"file\" className=\"form-control\" name=\"image\" ref={register({ required: true})} onChange={onUploadImg} />\n\t\t\t\t\t\t\t          {errors.image && errors.image.type === \"required\" && <label className=\"text-danger\">Ban chua nhap gia tri</label>}\n\t\t\t\t\t\t\t        </div>\n\t\t\t\t\t        \t</div>\n\t\t\t\t\t        \t<div className=\"col-6\">\n\t\t\t\t\t\t\t        <img id=\"img\" src={singleCate.image} />\n\t\t\t\t\t        \t</div>\n\t\t\t\t\t\t        <div className=\"form-group col-12 ml-2\">\n\t\t\t\t\t\t        \t<button type=\"submit\" className=\"btn btn-primary mx-1\">Submit</button>\n\t\t\t\t\t\t\t\t\t<Link to=\"/admin/categories\">\n\t\t\t\t\t\t        \t\t<button type=\"button\" className=\"btn btn-danger\">Cancel</button>\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t        </div>\n\t\t\t\t\t        </div>\n\t\t\t\t\t        <div>\n\n\t\t\t\t\t        </div>\n\t\t\t\t\t    </form>\n\t\t\t\t\t</>\n\treturn (\n\t\t<div>\n\t\t\t<Admin_layout section={section} />\n\t\t</div>\n\t)\n}\n\nexport default Add_category"]},"metadata":{},"sourceType":"module"}